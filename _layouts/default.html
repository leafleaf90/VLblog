<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Google tag (gtag.js) -->
    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=G-N4J4YJSND7"
    ></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());

      gtag("config", "G-N4J4YJSND7");
    </script>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Viktor Lovgren - Home</title>
    <link
      rel="apple-touch-icon"
      sizes="180x180"
      href="/assets/favicon/apple-touch-icon.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="/assets/favicon/favicon-32x32.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="16x16"
      href="/assets/favicon/favicon-16x16.png"
    />
    <link rel="manifest" href="/assets/favicon/site.webmanifest" />
    <link
      rel="stylesheet"
      href="{{ 'assets/styles.css' | relative_url }}?v={{ site.time | date: '%s' }}"
    />
    <link rel="stylesheet" href={{ "assets/base16_dark.css" | relative_url }} />
    <link rel="stylesheet" href={{ "assets/normalize.css" | relative_url }} />
    <link rel="stylesheet" href="https://use.typekit.net/idk2kll.css" />

    <!-- Critical Mobile CSS Override -->
    <style>
      @media screen and (max-width: 400px) {
        .main-layout {
          display: flex !important;
          flex-direction: column !important;
          gap: 1rem !important;
        }

        .content-grid,
        .projects-grid {
          display: flex !important;
          flex-direction: column !important;
          gap: 1rem !important;
        }

        .page-container {
          padding: 0 0.5rem !important;
        }

        .post-card,
        .project-card {
          width: 100% !important;
          max-width: none !important;
        }

        /* Hide Explore Topics section on mobile */
        .sidebar-section {
          display: none !important;
        }
      }

      /* Hide Explore Topics on tablet as well */
      @media screen and (max-width: 768px) {
        .sidebar-section {
          display: none !important;
        }
      }

      /* Contact Modal Styles */
      .contact-modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: 1000;
      }

      .modal-overlay {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.5);
        backdrop-filter: blur(4px);
      }

      .modal-content {
        position: relative;
        background: white;
        border-radius: 12px;
        max-width: 700px;
        width: 95%;
        max-height: 85vh;
        overflow-y: auto;
        margin: 3% auto;
        box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1),
          0 10px 10px -5px rgba(0, 0, 0, 0.04);
      }

      .modal-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 2rem;
        border-bottom: 1px solid #e5e7eb;
      }

      .modal-header h3 {
        margin: 0;
        font-size: 1.5rem;
        font-weight: 600;
        color: #111827;
      }

      .close-btn {
        background: none;
        border: none;
        font-size: 1.5rem;
        cursor: pointer;
        color: #6b7280;
        padding: 0;
        width: 2rem;
        height: 2rem;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 4px;
        transition: background-color 0.2s;
      }

      .close-btn:hover {
        background-color: #f3f4f6;
        color: #111827;
      }

      .modal-body {
        padding: 2rem;
      }

      .modal-body p {
        margin: 0 0 2rem 0;
        color: #6b7280;
        line-height: 1.6;
        font-size: 1.1rem;
      }

      .contact-form {
        display: flex;
        flex-direction: column;
        gap: 2rem;
      }

      .form-group {
        display: flex;
        flex-direction: column;
      }

      .form-group label {
        font-weight: 600;
        color: #374151;
        margin-bottom: 1rem;
        font-size: 1rem;
        text-transform: uppercase;
        letter-spacing: 0.05em;
      }

      .form-group input,
      .form-group textarea {
        padding: 1.25rem !important;
        border: 2px solid #d1d5db !important;
        border-radius: 10px !important;
        font-size: 1.1rem !important;
        transition: border-color 0.2s, box-shadow 0.2s;
        width: 100% !important;
        box-sizing: border-box !important;
        min-height: 50px !important;
      }

      .form-group input:focus,
      .form-group textarea:focus {
        outline: none !important;
        border-color: #3b82f6 !important;
        box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.15) !important;
      }

      .form-group textarea {
        resize: vertical !important;
        min-height: 140px !important;
        font-family: inherit !important;
      }

      .form-actions {
        display: flex;
        gap: 1rem;
        margin-top: 1.5rem;
      }

      .btn-send,
      .btn-cancel {
        padding: 1rem 1.5rem;
        border-radius: 8px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.2s;
        border: none;
        font-size: 1rem;
      }

      .btn-send {
        background: #3b82f6;
        color: white;
        flex: 1;
      }

      .btn-send:hover {
        background: #2563eb;
      }

      .btn-send:disabled {
        background: #9ca3af;
        cursor: not-allowed;
      }

      .btn-cancel {
        background: #f3f4f6;
        color: #374151;
        flex: 1;
      }

      .btn-cancel:hover {
        background: #e5e7eb;
      }

      /* Contact Trigger Button */
      .contact-trigger {
        position: fixed;
        bottom: 2rem;
        right: 2rem;
        background: #3b82f6;
        color: white;
        border: none;
        border-radius: 50px;
        padding: 0.75rem 1.25rem;
        font-weight: 600;
        cursor: pointer;
        box-shadow: 0 4px 14px 0 rgba(59, 130, 246, 0.39);
        transition: all 0.2s;
        display: flex;
        align-items: center;
        gap: 0.5rem;
        z-index: 100;
      }

      .contact-trigger:hover {
        background: #2563eb;
        transform: translateY(-2px);
        box-shadow: 0 8px 25px 0 rgba(59, 130, 246, 0.5);
      }

      .contact-trigger svg {
        width: 1.25rem;
        height: 1.25rem;
      }

      @media (max-width: 480px) {
        .contact-trigger {
          bottom: 1rem;
          right: 1rem;
          padding: 0.625rem 1rem;
          font-size: 0.875rem;
        }

        .modal-content {
          margin: 2% auto;
          width: 95%;
          max-width: none;
        }

        .modal-header,
        .modal-body {
          padding: 1rem;
        }
      }

      /* Desktop improvements */
      @media (min-width: 768px) {
        .modal-content {
          max-width: 650px;
          margin: 8% auto;
        }

        .form-group input,
        .form-group textarea {
          font-size: 1.1rem;
          padding: 1.25rem;
        }

        .contact-form {
          gap: 2rem;
        }
      }
    </style>
    {% if jekyll.environment == 'production' and site.google_analytics %} {%
    include analytics.html %} {% endif %}
    <meta property="og:site_name" content="site.name" />
    {% if page.description %}
    <meta name="og:description" content="{{ page.description }}" />
    {% else %}
    <meta name="og:description" content="{{ site.description }}" />
    {% endif %} {% if page.date %}
    <meta
      property="article:published_time"
      content="{{ page.date | date_to_xmlschema }}"
    />
    <meta property="article:author" content="{{ site.url }}/about/" />
    {% endif %} {% if page.title %}
    <meta name="og:title" content="{{ page.title }}" />
    {% else %}
    <meta name="og:title" content="{{ site.name }}" />
    {% endif %} {% if page.categories %} {% for category in page.categories
    limit:1 %}
    <meta property="article:section" content="{{ category }}" />
    {% endfor %} {% endif %} {% if page.featured-image %}
    <meta
      name="og:image"
      itemprop="image"
      content="{{ page.featured-image | absolute_url}}"
    />
    {% endif %}
    <meta name="og:url" content="{{ page.url | absolute_url}}" />
    <meta name="twitter:card" content="summary_large_image" />
    {% if page.title %}
    <meta property="og:type" content="article" />
    {% else %}
    <meta property="og:type" content="website" />
    {% endif %}
  </head>
  <body>
    <!-- Modern Navigation -->
    <nav class="navbar">
      <div class="navbar-container">
        <a href="/" class="navbar-brand">
          <span class="milka">VL<span class="red">.</span></span>
        </a>
        <ul class="navbar-nav">
          <li><a href="/">Home</a></li>
          <li><a href="/books">Books</a></li>
          <li><a href="/quotes">Quotes</a></li>
          <li><a href="/categories">Blog</a></li>
        </ul>
      </div>
    </nav>

    <div style="min-height: 100vh; max-width: 100vw; overflow: hidden">
      <div>{{ content }}</div>
    </div>
    <footer style="padding-top: 6rem; padding-bottom: 6rem">
      <p>&copy;Viktor LÃ¶vgren 2025</p>
      <a
        style="
          margin-left: 1.5rem;

          text-decoration: none;
          color: white;
        "
        href="mailto:mail@viktorlovgren.com"
        >mail@viktorlovgren.com</a
      >
      <a
        style="margin-left: 1.5rem"
        href="https://x.com/viktor_lovgren"
        target="_blank"
        ><img style="width: 50px" src="/assets/images/x.svg" alt=""
      /></a>
    </footer>

    <!-- Contact Modal -->
    <div id="contactModal" class="contact-modal">
      <div class="modal-overlay"></div>
      <div class="modal-content">
        <div class="modal-header">
          <h3>Talk to me!</h3>
          <button id="closeModal" class="close-btn">&times;</button>
        </div>
        <div class="modal-body">
          <p>
            Do you need help building a website, webapp or integration? Or have
            comments or questions. Get in touch below:
          </p>
          <form
            id="contactForm"
            class="contact-form"
            name="contact"
            method="POST"
            netlify
          >
            <input type="hidden" name="form-name" value="contact" />
            <div class="form-group">
              <label for="contactName">NAME</label>
              <input type="text" id="contactName" name="name" required />
            </div>
            <div class="form-group">
              <label for="contactEmail">EMAIL</label>
              <input type="email" id="contactEmail" name="email" required />
            </div>
            <div class="form-group">
              <label for="contactMessage">MESSAGE</label>
              <textarea
                id="contactMessage"
                name="message"
                rows="4"
                required
              ></textarea>
            </div>
            <div class="form-actions">
              <button type="submit" class="btn-send">Send</button>
              <button type="button" id="cancelBtn" class="btn-cancel">
                Cancel
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>

    <!-- Contact Button (floating) -->
    <button id="contactTrigger" class="contact-trigger">
      <svg
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
      >
        <path
          d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"
        ></path>
      </svg>
      Talk to me!
    </button>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const modal = document.getElementById("contactModal");
        const trigger = document.getElementById("contactTrigger");
        const closeBtn = document.getElementById("closeModal");
        const cancelBtn = document.getElementById("cancelBtn");
        const overlay = document.querySelector(".modal-overlay");
        const form = document.getElementById("contactForm");

        // Open modal
        function openModal() {
          modal.style.display = "block";
          document.body.style.overflow = "hidden";

          // Force style application for form fields
          setTimeout(() => {
            const inputs = modal.querySelectorAll(
              ".form-group input, .form-group textarea"
            );
            inputs.forEach((input) => {
              input.style.padding = "1.5rem";
              input.style.border = "3px solid #d1d5db";
              input.style.borderRadius = "12px";
              input.style.fontSize = "1.2rem";
              input.style.minHeight =
                input.tagName === "TEXTAREA" ? "150px" : "60px";
              input.style.width = "100%";
              input.style.boxSizing = "border-box";
            });
          }, 10);
        }

        // Close modal
        function closeModal() {
          modal.style.display = "none";
          document.body.style.overflow = "auto";
          form.reset();
        }

        // Event listeners
        trigger.addEventListener("click", openModal);
        closeBtn.addEventListener("click", closeModal);
        cancelBtn.addEventListener("click", closeModal);
        overlay.addEventListener("click", closeModal);

        // Close on Escape key
        document.addEventListener("keydown", function (e) {
          if (e.key === "Escape" && modal.style.display === "block") {
            closeModal();
          }
        });

        // Form submission
        form.addEventListener("submit", async function (e) {
          e.preventDefault();

          const submitBtn = form.querySelector(".btn-send");
          const originalText = submitBtn.textContent;

          // Show loading state
          submitBtn.disabled = true;
          submitBtn.textContent = "Sending...";

          try {
            const formData = new FormData(form);

            // Submit to Netlify
            const response = await fetch("/", {
              method: "POST",
              headers: { "Content-Type": "application/x-www-form-urlencoded" },
              body: new URLSearchParams(formData).toString(),
            });

            if (response.ok) {
              alert("Thank you! Your message has been sent successfully.");
              closeModal();
            } else {
              throw new Error("Failed to send message");
            }
          } catch (error) {
            console.error("Error:", error);
            alert(
              "Sorry, there was an error sending your message. Please try again or email me directly at mail@viktorlovgren.com"
            );
          } finally {
            // Reset button state
            submitBtn.disabled = false;
            submitBtn.textContent = originalText;
          }
        });
      });
    </script>
  </body>
</html>
